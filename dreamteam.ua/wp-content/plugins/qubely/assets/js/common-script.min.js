function loadScriptAsync(e){return new Promise((t,a)=>{const i=document.createElement("script");i.src=e,i.async=!0,i.onload=(()=>{t()});const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n)})}jQuery(document).ready(function(e){"use strict";if(void 0!==e(document).magnificPopup&&e(".qubely-video-popup").magnificPopup({type:"iframe",rtl:!0,mainClass:"mfp-fade",removalDelay:300,preloader:!1,fixedContentPos:!1}),window.location.href.includes("preview=true")){let e=document.createElement("style");e.type="text/css",e.id="qubely-block-js-preview",e.innerHTML=localStorage.getItem("qubelyCSS"),window.document.getElementsByTagName("head")[0].appendChild(e)}if(e(".qubely-block-counter-number").length>0){const t=e(".qubely-block-counter-number");let a=0;for(;a<t.length;){let e=t[a],i=parseInt(e.dataset.start),n=parseInt(e.dataset.limit),o=parseInt(e.dataset.counterduration),l=Math.ceil(n/o*10);if(i<n){let t=setInterval(function(){let a=n-i;a>=l?i+=l:a>=50?i+=50:i++,e.innerText=i,i>=n&&clearInterval(t)},10)}a++}}function t(e){let t="";try{t=JSON.parse(e.attr("data-styles"))}catch(e){}const a={zoom:parseInt(e.attr("data-zoom"),10),zoomControl:"true"===e.attr("data-show-zoom-buttons"),zoomControlOpt:{style:"DEFAULT",position:"RIGHT_BOTTOM"},mapTypeControl:"true"===e.attr("data-show-map-type-buttons"),streetViewControl:"true"===e.attr("data-show-street-view-button"),fullscreenControl:"true"===e.attr("data-show-fullscreen-button"),draggable:"true"===e.attr("data-option-draggable"),styles:t},i=new google.maps.Map(e[0],a);var n={placeId:e.attr("data-placeID"),fields:["place_id","geometry","name","formatted_address","adr_address","website"]};new google.maps.places.PlacesService(i).getDetails(n,(t,a)=>{if(a===google.maps.places.PlacesServiceStatus.OK){t.geometry.viewport?i.fitBounds(t.geometry.viewport):i.setCenter(t.geometry.location);let a={map:i};const n=e.attr("data-icon-pointer");n&&(a.icon=n);const o=new google.maps.Marker(a);o.setPlace({placeId:t.place_id,location:t.geometry.location}),"true"===e.attr("data-show-marker")?o.setVisible(!0):o.setVisible(!1);const l='<div class="qubely-gmap-marker-window"><div class="qubely-gmap-marker-place">'+t.name+'</div><div class="qubely-gmap-marker-address">'+t.adr_address+'</div><div class="qubely-gmap-marker-url"><a href="'+t.website+'" target="_blank">'+t.website+"</a></div></div>",r=new google.maps.InfoWindow({content:l});o.addListener("click",()=>{r.open(i,o)})}})}function a(t){const a=atob(t.find('input[name="field-error-message"]').val());let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=!1;return t.find(" input[type=text], input[type=email], input[type=radio], input[type=checkbox], textarea, select").each(function(){if(!0===n)e(this).on("change keyup",function(){if(o=i(e(this),a))return!1});else if(o=i(e(this),a))return!1}),o}function i(e,t){let a=!1;const i=e.parents(".qubely-form-group-inner");t=`<p class="qubely-form-required-field">${t}</p>`;const n=0===i.find("p.qubely-form-required-field").length;if(void 0!==e.prop("required")){if("email"===e.attr("type")&&(o=e.val(),!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(o).toLowerCase())))return n&&i.append(t),!0;0===e.val().length&&(n&&i.append(t),a=!0),e.val().length>0&&(i.find("p.qubely-form-required-field").remove(),a=!1)}var o;if("radio"===e.attr("type")||"checkbox"===e.attr("type")){const o=e.parent().parent();"true"==o.attr("data-required")&&(0===o.find("input:checked").length?(n&&i.append(t),a=!0):(i.find("p.qubely-form-required-field").remove(),a=!1))}return a}e(".qubely-block-accordion:not(.qubely-accordion-ready)").each(function(){const t=e(this),a=t.attr("data-item-toggle");t.addClass("qubely-accordion-ready"),t.on("click",".qubely-accordion-item .qubely-accordion-panel",function(i){i.preventDefault();const n=e(this).parent(".qubely-accordion-item"),o=n.find(".qubely-accordion-body");if(n.hasClass("qubely-accordion-active")?(o.css("display","block").slideUp(150),n.removeClass("qubely-accordion-active")):(o.css("display","none").slideDown(150),n.addClass("qubely-accordion-active")),"true"==a){const e=t.find(".qubely-accordion-active").not(n);e.length&&(e.find(".qubely-accordion-body").css("display","block").slideUp(150),e.removeClass("qubely-accordion-active"))}})}),e(".qubely-tab-title").on("click",function(t){var a=e(this).parent(),i=a.index();a.hasClass("qubely-active")||(a.closest(".qubely-tab-nav").find(".qubely-active").removeClass("qubely-active"),a.addClass("qubely-active"),a.closest(".qubely-block-tab").find(".qubely-tab-content.qubely-active").hide().removeClass("qubely-active"),a.closest(".qubely-block-tab").find(".qubely-tab-content").eq(i).fadeIn(400,function(){e(this).addClass("qubely-active")}))}),e(".qubely-carousel-title").on("click",function(t){var a=e(this).parent(),i=a.index();a.hasClass("qubely-active")||(a.closest(".qubely-carousel-nav-wraper").find(".qubely-active").removeClass("qubely-active"),a.addClass("qubely-active"),a.closest(".qubely-block-carousel").find(".qubely-carousel-item.qubely-active").hide().removeClass("qubely-active"),a.closest(".qubely-block-carousel").find(".qubely-carousel-item").eq(i).fadeIn(400,function(){e(this).addClass("qubely-active")}))}),e(".qubely-carousel-nav").on("click",function(t){let a=e(this).parent().closest(".qubely-block-carousel"),i=e(this),n=i.attr("data-direction"),o=i.attr("data-items"),l=e(".qubely-carousel-item-indicator.qubely-active").index(".qubely-carousel-item-indicator"),r="next"===n?l<o-1?l+1:0:l>0?l-1:o-1;a.find(".qubely-carousel-item.qubely-active").hide().removeClass("qubely-active"),a.find(".qubely-carousel-item-indicator.qubely-active").removeClass("qubely-active"),a.find(".qubely-carousel-item").eq(r).fadeIn(400,function(){e(this).addClass("qubely-active")}),a.find(".qubely-carousel-item-indicator").eq(r).addClass("qubely-active")}),e(".qubely-google-map:not(.qubely-google-map-ready)").each(function(){const a=e(this);a.addClass("qubely-google-maps-ready");const i="https://maps.googleapis.com/maps/api/js?v=3&sensor=true&libraries=places&key="+a.attr("data-apiKey");"object"==typeof google&&"object"==typeof google.maps?t(a):loadScriptAsync(i).then(()=>{t(a)})}),e("form.qubely-form:not(.qubely-form-ready)").each(function(){const t=e(this);t.addClass("qubely-form-ready"),t.find("input.qubely-form-control").on("keydown",e=>{if(13===e.which)return e.preventDefault(),!1}),a(t,!0);const i=t.find('input[name="recaptcha"]').val(),n=t.find('input[name="recaptcha-site-key"]').val();if("true"==i){loadScriptAsync("https://www.google.com/recaptcha/api.js?onload=initGoogleReChaptcha&render=explicit").then(()=>{window.initGoogleReChaptcha=(()=>{document.querySelectorAll(".qubely-block-form form .qubely-google-recaptcha").forEach(e=>{grecaptcha.render(e,{sitekey:n})})})})}t.submit(e=>{e.preventDefault();let i=t.serializeArray();a(t)||(i.push({name:"captcha",value:"undefined"!=typeof grecaptcha?grecaptcha.getResponse():void 0}),jQuery.ajax({url:qubely_urls.ajax+"?action=qubely_send_form_data",type:"POST",data:i,beforeSend:()=>{t.find('button[type="submit"]').addClass("disable").attr("disabled",!0),t.find(".qubely-form-message").html('<div class="qubely-alert qubely-alert-info">Message sending...</div>')},success:e=>{t.find('button[type="submit"]').removeClass("disable").attr("disabled",!1),t.find(".qubely-form-message").html(`<div class="qubely-alert qubely-alert-success">${e.data.msg}</div>`),setTimeout(()=>t.find(".qubely-form-message").html(""),4e3),1==e.data.status&&t.trigger("reset")},error:(e,a,i)=>{t.find('button[type="submit"]').removeClass("disable").attr("disabled",!1),t.find(".qubely-form-message").html(`<div class="qubely-alert qubely-alert-danger">${a} : ${i} - ${e.responseJSON}</div>`)}}))})})}),function(e){var t,a,i,n={},o=document,l=window,r=o.documentElement,s=e.expando;function c(){var i,s,c,d,u=e(),p=0;if(e.each(n,function(e,t){var a=t.data.selector,i=t.$element;u=u.add(a?i.find(a):i)}),i=u.length)for(t=t||((d={height:l.innerHeight,width:l.innerWidth}).height||!(s=o.compatMode)&&e.support.boxModel||(d={height:(c="CSS1Compat"===s?r:o.body).clientHeight,width:c.clientWidth}),d),a=a||{top:l.pageYOffset||r.scrollTop||o.body.scrollTop,left:l.pageXOffset||r.scrollLeft||o.body.scrollLeft};p<i;p++)if(e.contains(r,u[p])){var y,f,b,m=e(u[p]),h={height:m.height(),width:m.width()},v=m.offset(),g=m.data("inview");if(!a||!t)return;v.top+h.height>a.top&&v.top<a.top+t.height&&v.left+h.width>a.left&&v.left<a.left+t.width?(b=(y=a.left>v.left?"right":a.left+t.width<v.left+h.width?"left":"both")+"-"+(f=a.top>v.top?"bottom":a.top+t.height<v.top+h.height?"top":"both"),g&&g===b||m.data("inview",b).trigger("inview",[!0,y,f])):g&&m.data("inview",!1).trigger("inview",[!1])}}e.event.special.inview={add:function(t){n[t.guid+"-"+this[s]]={data:t,$element:e(this)},i||e.isEmptyObject(n)||(i=setInterval(c,250))},remove:function(t){try{delete n[t.guid+"-"+this[s]]}catch(e){}e.isEmptyObject(n)&&(clearInterval(i),i=null)}},e(l).bind("scroll resize scrollstop",function(){t=a=null}),!r.addEventListener&&r.attachEvent&&r.attachEvent("onfocusin",function(){a=null}),e(document).on("inview","[data-qubelyanimation]",function(t,a,i,n){var o=e(this);if(a){let e=o.data("qubelyanimation");e&&void 0!==e.name&&0!=e.openAnimation&&(setTimeout(()=>{o.css({opacity:1})},parseInt(e.delay)+100),o.css({"animation-name":e.name,"animation-timing-function":e.curve,"animation-duration":e.duration+"ms","animation-delay":e.delay+"ms","animation-iteration-count":"once"===e.repeat?1:"infinite"}))}o.unbind("inview")});var d=e(window),u=d.height();d.resize(function(){u=d.height()}),e.fn.parallax=function(t,a,i){var n,o,l=e(this);function r(){var i=d.scrollTop();l.each(function(){var r=e(this),s=r.offset().top;s+n(r)<i||s>i+u||l.css("backgroundPosition",t+" "+Math.round((o-i)*a)+"px")})}l.each(function(){o=l.offset().top}),n=i?function(e){return e.outerHeight(!0)}:function(e){return e.height()},(arguments.length<1||null===t)&&(t="50%"),(arguments.length<2||null===a)&&(a=.1),(arguments.length<3||null===i)&&(i=!0),d.bind("scroll",r).resize(r),r()},void 0!==jQuery.fn.parallax&&e(document).ready(function(){e(".qubely-row-parallax").each(function(){e(this).parallax("center",.4)})})}(jQuery);